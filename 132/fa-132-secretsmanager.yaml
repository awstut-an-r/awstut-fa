AWSTemplateFormatVersion: 2010-09-09

Parameters:
  CustomHeaderFieldNameJsonKey:
    Type: String
    
  CustomHeaderFieldName:
    Type: String
    
  CustomHeaderFieldValueJsonKey:
    Type: String
    
  CustomHeaderFieldValueLength:
    Type: Number

  Prefix:
    Type: String
    

Resources:
  Secret:
    Type: AWS::SecretsManager::Secret
    Properties: 
      Description: test secret
      GenerateSecretString: 
        ExcludeCharacters: ""
        ExcludeLowercase: false
        ExcludeNumbers: false
        ExcludePunctuation: false
        ExcludeUppercase: false
        GenerateStringKey: !Ref CustomHeaderFieldValueJsonKey
        IncludeSpace: false
        PasswordLength: !Ref CustomHeaderFieldValueLength
        RequireEachIncludedType: true
        SecretStringTemplate: !Sub '{"${CustomHeaderFieldNameJsonKey}": "${CustomHeaderFieldName}", "${CustomHeaderFieldValueJsonKey}": ""}'
      KmsKeyId: alias/aws/secretsmanager
      Name: !Ref Prefix
      
      
Outputs:
  Secret:
    Value: !Ref Secret
